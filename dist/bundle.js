!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);let n=document.getElementById("canvas"),o=(n.getContext("2d"),n.height,n.width,"grey"),l=40,i=0,c=document.getElementById("canvas"),u=c.getContext("2d"),a=c.height,f=c.width;function d(){return Math.floor(Math.random()*(f/l))}function s(){return Math.floor(Math.random()*(a/l))}function p(e){return e%Math.floor(f/l)*l}function h(e){return e%Math.floor(f/l)*l}let m={c:0,r:0},g=[{pos:`${m.c},${m.r}`,type:"person"}],$={};for(;null==$.x;){let e=d(),t=s();0==g.filter(r=>r.pos==`${e},${t}`).length&&($.c=e,$.r=t);break}function y(e,t){u.drawImage(document.getElementById("person"),p(e),h(t),40,40)}document.addEventListener("DOMContentLoaded",()=>{!function(){u.strokeStyle=o,u.lineWidth=parseInt(i);let e=parseInt(l);for(let t=0;t<a;t+=e)u.moveTo(0,t),u.lineTo(f,t),u.stroke();for(let t=0;t<f;t+=e)u.moveTo(t,0),u.lineTo(t,a),u.stroke()}(),y(m.c,m.r),function(){for(let e=0;e<150;e++){let t=d(),r=s();g.filter(e=>e.pos==`${t},${r}`).length>0?e-=1:(u.drawImage(document.getElementById("tree"),p(t)+1,h(r)+1,38,38),g.push({pos:`${t},${r}`,type:"tree"}))}}()});let v=[],b=m,M=null,w=null,I={};function x(){let e=v.shift();if(!e)return void window.cancelAnimationFrame(M);u.clearRect(p(I.c)+1,h(I.r)+1,38,38);let t=e.split(",");b={c:t[0],r:t[1]},I={c:t[0],r:t[1]},u.clearRect(p(I.c)+1,h(I.r)+1,38,38),y(t[0],t[1]),v.length>0&&(w=setTimeout(()=>{window.requestAnimationFrame(x)},200))}c.addEventListener("click",e=>{window.cancelAnimationFrame(M),M=null,clearInterval(w);let t={c:(n=e.clientX,Math.floor(n/l)),r:(r=e.clientY,Math.floor(r/l))};var r,n,o,i;for(let e=0;e<v.length;e++){let t=v[e].split(",");u.clearRect(p(t[0])+1,h(t[1])+1,38,38)}v=function(e,t){let r={c:e.c,r:e.r},n=[r],o=!1,i=[],c={};c[`${r.c},${r.r}`]=!1;for(;n.length>0;){r=n.shift();let e=[-1,1,0,0],u=[0,0,-1,1];if(t.c==r.c&&t.r==r.r){o=!0;break}for(let t=0;t<e.length;t++){let o=parseInt(r.r)+e[t],d=parseInt(r.c)+u[t];if(o<0||d<0||o>Math.floor(a/l)-1||d>Math.floor(f/l)-1)continue;if(-1!==i.indexOf(`${d},${o}`))continue;let s=g.filter(e=>e.pos==`${d},${o}`);s.length>0&&"tree"==s[0].type||(i.push(`${d},${o}`),n.push({c:d,r:o}),c[`${d},${o}`]=`${r.c},${r.r}`)}}if(o){let n=[`${t.c},${t.r}`];if(r=c[`${t.c},${t.r}`],!r)return!1;for(;r!==`${e.c},${e.r}`;)n.push(r),r=c[r];return n.reverse()}return!1}(b,t);for(let e=0;e<v.length;e++){let t=v[e].split(",");o=t[0],i=t[1],u.beginPath(),u.arc(p(o)+20,h(i)+20,5,0,2*Math.PI),u.fillStyle="red",u.fill(),u.lineWidth=0,u.stroke()}v&&(I={c:b.c,r:b.r},M=window.requestAnimationFrame(x))})}]);
//# sourceMappingURL=bundle.js.map